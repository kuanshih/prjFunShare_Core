@model prjFunShare_Core.ViewModels.ClndexViewModel

@{
    ViewData["Title"] = "首頁";
}

<!--Carousel-->
<div id="carouselExampleIndicators" class="carousel slide" data-mdb-ride="carousel">
    <div class="carousel-indicators">
        <button type="button" data-mdb-target="#carouselExampleIndicators" data-mdb-slide-to="0" class="active"
                aria-current="true" aria-label="Slide 1"></button>
        <button type="button" data-mdb-target="#carouselExampleIndicators" data-mdb-slide-to="1"
                aria-label="Slide 2"></button>
        <button type="button" data-mdb-target="#carouselExampleIndicators" data-mdb-slide-to="2"
                aria-label="Slide 3"></button>
        <button type="button" data-mdb-target="#carouselExampleIndicators" data-mdb-slide-to="3"
                aria-label="Slide 4"></button>
    </div>
    <div class="carousel-inner">
        <div class="carousel-item active">
            <a href="@Url.Action("Search","Product")?keyword=體驗">
                <img src="~/img/home/banner_experience.png" class="d-block w-100" />
            </a>
        </div>
        <div class="carousel-item">
            <a href="@Url.Action("Search","Product")?keyword=營">
                <img src="~/img/home/banner_summerCamp.png" class="d-block w-100" />
            </a>
        </div>
        <div class="carousel-item">
            <a href="@Url.Action("Register","Home")">
                <img src="~/img/home/banner_prompt.png" class="d-block w-100" />
            </a>
        </div>
        <div class="carousel-item">
            <a href="@Url.Action("Search","Product")?keyword=課">
                <img src="~/img/home/banner_learn.png" class="d-block w-100" />
            </a>
        </div>
    </div>
    <button class="carousel-control-prev" type="button" data-mdb-target="#carouselExampleIndicators"
            data-mdb-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-mdb-target="#carouselExampleIndicators"
            data-mdb-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>
<!--Carousel-->
<!-- Tabs navs -->
<ul class="nav nav-tabs mb-3 nav-fill" id="ex-with-icons" role="tablist">
    <li class="nav-item" role="presentation">
        <a class="nav-link active" id="ex-with-icons-tab-1" data-mdb-toggle="tab" href="#ex-with-icons-tabs-1"
           role="tab" aria-controls="ex-with-icons-tabs-1" aria-selected="true">
            <i class="fa-solid fa-campground me-2 fa-2xl"></i><span class="category">營隊活動 @* <span class="text-muted fs-6">(@Model.category1Count)</span> *@ </span>
        </a>
    </li>
    <li class="nav-item" role="presentation">
        <a class="nav-link" id="ex-with-icons-tab-2" data-mdb-toggle="tab" href="#ex-with-icons-tabs-2" role="tab"
           aria-controls="ex-with-icons-tabs-2" aria-selected="false">
            <i class="fa-solid fa-seedling me-2 fa-2xl"></i><span class="category">體驗活動 @* <span class="text-muted fs-6">(@Model.category2Count)</span> *@ </span>
        </a>
    </li>
    <li class="nav-item" role="presentation">
        <a class="nav-link" id="ex-with-icons-tab-3" data-mdb-toggle="tab" href="#ex-with-icons-tabs-3" role="tab"
           aria-controls="ex-with-icons-tabs-3" aria-selected="false">
            <i class="fa-solid fa-palette me-2 fa-2xl"></i><span class="category">才藝課程 @* <span class="text-muted fs-6">(@Model.category3Count)</span> *@ </span>
        </a>
    </li>
    <li class="nav-item" role="presentation">
        <a class="nav-link" id="ex-with-icons-tab-4" data-mdb-toggle="tab" href="#ex-with-icons-tabs-4" role="tab"
           aria-controls="ex-with-icons-tabs-4" aria-selected="false">
            <i class="fa-solid fa-book-open me-2 fa-2xl"></i><span class="category">學科課程 @* <span class="text-muted fs-6">(@Model.category4Count)</span> *@ </span>
        </a>
    </li>
</ul>
<!-- Tabs navs -->
<!-- Tabs content -->
<div class="tab-content" id="ex-with-icons-content">
    <div class="tab-pane fade show active" id="ex-with-icons-tabs-1" role="tabpanel" aria-labelledby="ex-with-icons-tab-1">
        <!-- loading效果 -->
        <div class="row g-4 mb-2">
            <div class="text-center text-primary">
                <div class="spinner-border" role="status">
                    <span class="sr-only">Loading...</span>
                </div>
            </div>
        </div>
        <!-- loading效果 -->
        <div class="row g-4" id="tabCategoryId1">
        </div>
    </div>
    <div class="tab-pane fade" id="ex-with-icons-tabs-2" role="tabpanel" aria-labelledby="ex-with-icons-tab-2">
        <!-- loading效果 -->
        <div class="row g-4 mb-2">
            <div class="text-center text-primary">
                <div class="spinner-border" role="status">
                    <span class="sr-only">Loading...</span>
                </div>
            </div>
        </div>
        <!-- loading效果 -->
        <div class="row g-4" id="tabCategoryId2">
        </div>
    </div>
    <div class="tab-pane fade" id="ex-with-icons-tabs-3" role="tabpanel" aria-labelledby="ex-with-icons-tab-3">
        <!-- loading效果 -->
        <div class="row g-4 mb-2">
            <div class="text-center text-primary">
                <div class="spinner-border" role="status">
                    <span class="sr-only">Loading...</span>
                </div>
            </div>
        </div>
        <!-- loading效果 -->
        <div class="row g-4" id="tabCategoryId3">
        </div>
    </div>
    <div class="tab-pane fade" id="ex-with-icons-tabs-4" role="tabpanel" aria-labelledby="ex-with-icons-tab-4">
        <!-- loading效果 -->
        <div class="row g-4 mb-2">
            <div class="text-center text-primary">
                <div class="spinner-border" role="status">
                    <span class="sr-only">Loading...</span>
                </div>
            </div>
        </div>
        <!-- loading效果 -->
        <div class="row g-4" id="tabCategoryId4">
            @*             @{
            foreach(var prod in Model)
            {
            string heart = prod.IsPocketed ? "fa-solid" : "fa-regular";
            string text = prod.Features.Length > 50 ? (prod.Features.Substring(0, 49) + " ...") : prod.Features;
            <div class="col-lg-4 col-md-6">
            <div class="card">
            <div class="position-relative overflow-hidden">
            <div class="bg-image hover-zoom">
            <a href="@Url.Action("List","Product",new{id=prod.ProductId})">
            <img class="card-img-top"
            src="~/img/product/@prod.ImagePath" alt="">
            </a>
            </div>
            <div class="position-absolute top-0 end-0 mt-1 me-1">
            <button type="button" class="btn btn-white btn-floating shadow-0">
            <i class="@heart fa-heart fa-xl pe-none"></i>
            </button>
            </div>
            <div class="bg-white rounded-top text-primary position-absolute start-0 bottom-0 mx-4 pt-1 px-3">
            @prod.SubCategoryName
            </div>
            </div>
            <div class="p-4 pb-0">
            <a class="d-block h5 mb-2" href="@Url.Action("List","Product",new{id=prod.ProductId})">@prod.ProductName</a>
            <p>@text</p>
            <h5 class="text-end mb-3">@prod.UnitPrice 起</h5>
            </div>
            <div class="d-flex border-top">
            <small class="flex-fill text-center border-end py-2">
            <i class="fa fa-map-marker-alt text-primary me-2"></i>@prod.CityName
            </small>
            <small class="flex-fill text-center border-end py-2">
            <i class="fa fa-star text-primary me-2"></i>@prod.Rank
            </small>
            <small class="flex-fill text-center py-2">
            <i class="fa-solid fa-calendar-days text-primary me-2"></i>@prod.IsClass
            </small>
            </div>
            </div>
            </div>
            }
            } *@
        </div>
    </div>
    <div class="col-12 text-center wow fadeInUp m-3" data-wow-delay="0.1s">
        <a class="btn btn-primary py-3 px-5" href="@Url.Action("Search","Product")"><span class="category">檢視所有活動</span></a>
    </div>
</div>
<!-- Tabs content -->
<hr>
<!--地區-->
<div class="row  justify-content-center">
    <div class="col-3">
        <div class="card bg-dark text-white mb-3 hover-shadow" style="max-width: 18rem;">
            <a class="link-light" href="@Url.Action("Search","Product")?keyword=營">
                <img src="~/img/home/camp.jpg" class="card-img" />
                <div class="card-img-overlay">
                    <h5 class="card-title">夏令營特輯</h5>
                    <p class="card-text">
                        與孩子一同製造夏日回憶
                    </p>
                </div>
            </a>
        </div>
    </div>
    <div class="col-3">
        <div class="card bg-dark text-white mb-3 hover-shadow" style="max-width: 18rem;">
            <a class="link-light" href="@Url.Action("Search","Product")">
                <img src="~/img/home/taipei.jpg" class="card-img" />
                <div class="card-img-overlay">
                    <h5 class="card-title">北部活動</h5>
                </div>
            </a>
        </div>
    </div>
    <div class="col-3">
        <div class="card bg-dark text-white mb-3 hover-shadow" style="max-width: 18rem;">
            <a class="link-light" href="@Url.Action("Search","Product")">
                <img src="~/img/home/taichung.jpg" class="card-img" />
                <div class="card-img-overlay">
                    <h5 class="card-title">中部活動</h5>
                </div>
            </a>
        </div>
    </div>
    <div class="col-3">
        <div class="card bg-dark text-white mb-3 hover-shadow" style="max-width: 18rem;">
            <a class="link-light" href="@Url.Action("Search","Product")">
                <img src="~/img/home/kaohsiung.jpg" class="card-img" />
                <div class="card-img-overlay">
                    <h5 class="card-title">南部活動</h5>
                </div>
            </a>
        </div>
    </div>
</div>
<!--地區-->
<hr />
<!--card-->
<div class="tab-pane fade show p-0">
    <h3 class="text-center">精選活動</h3>
    <!-- loading效果 -->
    <div class="row g-4 mb-2">
        <div class="text-center text-primary">
            <div class="spinner-border" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </div>
    </div>
    <!-- loading效果 -->
    <div id="top6" class="row g-4">
       
    </div>
</div>
<hr>
<!--recipeCarousel-->
<div class="container text-center my-3">
    <h3>好評推薦</h3>
    <div class="row mx-auto my-auto justify-content-center">
        <div id="recipeCarousel" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner" role="listbox" id="commentDiv">
            </div>
            <a class="carousel-control-prev bg-transparent w-aut" href="#recipeCarousel" role="button" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            </a>
            <a class="carousel-control-next bg-transparent w-aut" href="#recipeCarousel" role="button" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
            </a>
        </div>
    </div>
</div>
<!--recipeCarousel-->
<!-- The Comment Modal -->
<div id="commentModal" class="modal">
    <!-- The Close Button -->
    <span class="closeImg">&times;</span>
    <!-- Modal Content (The Image) -->
    <img class="commentModal-content" id="imgShow">
</div>

<hr />
<!--sticky bottom-->
<div class="sticky-bottom text-center">
    <a asp-area="" asp-controller="Product" asp-action="Search">
        <button type="button" class="btn btn-dark btn-floating btn-lg">
            <i class="fa fa-search fa-lg pe-none"></i>
        </button>
    </a>
</div>
<!--sticky bottom-->
@section Styles{
    <style>
        .sticky-bottom {
            position: fixed;
            left: 50%;
            bottom: 5px;
            z-index: 0;
        }

        .transform {
            transition: 1s;
        }

            .transform:hover {
                transform: scale(1.05);
            }

        span.category {
            font-size: 18px;
        }

        /*css for recipeCarousel*/
        @@media (max-width: 767px) {
            #recipeCarousel .carousel-inner .carousel-item > div {
                display: none;
            }

                #recipeCarousel .carousel-inner .carousel-item > div:first-child {
                    display: block;
                }
        }

        #recipeCarousel .carousel-inner .carousel-item.active,
        #recipeCarousel .carousel-inner .carousel-item-next,
        #recipeCarousel .carousel-inner .carousel-item-prev {
            display: flex;
        }

        /* medium and up screens */
        @@media (min-width: 768px) {

            #recipeCarousel .carousel-inner .carousel-item-end.active,
            #recipeCarousel .carousel-inner .carousel-item-next {
                transform: translateX(25%);
            }

            #recipeCarousel .carousel-inner .carousel-item-start.active,
            #recipeCarousel .carousel-inner .carousel-item-prev {
                transform: translateX(-25%);
            }
        }

        #recipeCarousel .carousel-inner .carousel-item-end,
        #recipeCarousel .carousel-inner .carousel-item-start {
            transform: translateX(0);
        }

        #recipeCarousel .card {
            margin: 10px;
        }
        /*css for recipeCarousel*/

        #carouselExampleIndicators {
            z-index: 0;
        }

        .ellipsis2 {
            overflow: hidden;
            display: -webkit-box;
            text-overflow: ellipsis;
            -webkit-line-clamp: 2; /*行數*/
            -webkit-box-orient: vertical;
            white-space: normal;
        }
    </style>
}

@section Scripts{
    <script>
        const tab1 = document.querySelector('#tabCategoryId1');
        const tab2 = document.querySelector('#tabCategoryId2');
        const tab3 = document.querySelector('#tabCategoryId3');
        const tab4 = document.querySelector('#tabCategoryId4');
        const top6 = document.querySelector('#top6');
        let btnPocket = null;
        let indexTab1 = 0;
        let indexTab2 = 0;
        let indexTab3 = 0;
        let indexTab4 = 0;

        const commentDiv =document.querySelector('#commentDiv');

        $.ajax({
            'url': '@Url.Action("getCommentsByDate","Api")',
            'type': 'get',
            'dataType': 'json'
        })
        .done(function(datas){
                $.each(datas, function (i, com) {
                    let star = '';
                    let active = '';
                    let num = 0;
                    let imgStr = '';
                    while ((com.rank - num) >0) {
                        if ((com.rank - num) == 0.5)
                            star += `<i class="fa-solid fa-star-half-stroke text-primary"></i>`
                        else
                            star += `<i class="fa fa-star text-primary"></i>`
                        num++;
                    }
                    if (i == 0) 
                        active = 'active';

                    if (com.imagePath != null) {
                        imgStr = `<img src="@Url.Content("~/img/commentimg/")${com.imagePath}" class="commentImg" />`
                    }

                    commentDiv.innerHTML += `<div class="carousel-item ${active}">
                                    <div class="col-lg-3 col-md-4 col-sm-6">
                                        <div class="card bg-secondary-subtle text-start">
                                            <div class="card-header border-0 px-3">
                                                <div class="row">
                                                    <div class="col-3">
                                                                                <img src="data:image/jpg; base64, ${com.icon}" class="commentLogo" />
                                                    </div>
                                                    <div class="col-9">
                                                        <div class="row">
                                                            <div class="col-12">
                                                                        ${com.name}
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-12">
                                                                       <a class="text-muted p-0 m-0 text-sm-start" href="@Url.Action("List","Product")/${com.productId}">${com.productName}</a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="card-body p-1">
                                                    <p class="p-0 m-0">
                                                                ${star}<span class="ms-2">${com.rank}</span>
                                                    </p>
                                                            <div class="d-flex justify-content-between">
                                                                         <p class="p-0 mt-1 me-2 mb-0 ellipsis2">
                                                            <i class="fa-solid fa-quote-left fa-xs text-black-50 pe-2"></i>
                                                                                  <span data-mdb-toggle="tooltip" data-mdb-placement="bottom" title="${com.comment}">
                                                                  ${com.comment}
                                                                  </span>
                                                            <i class="fa-solid fa-quote-right fa-xs text-black-50 ps-2"></i>
                                                        </p>
                                                                ${imgStr}
                                                    </div>
                                                                    <p class="text-muted p-0 m-0"><small>${com.date}</small></p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    </div>`;
                });

                /*JS for recipeCarousel*/
                let items = document.querySelectorAll('#recipeCarousel .carousel-item')

                items.forEach((el) => {
                    const minPerSlide = 4
                    let next = el.nextElementSibling
                    for (var i = 1; i < minPerSlide; i++) {
                        if (!next) {
                            // wrap carousel by using first child
                            next = items[0]
                        }
                        let cloneChild = next.cloneNode(true)
                        el.appendChild(cloneChild.children[0])
                        next = next.nextElementSibling
                    }
                })
                /*JS for recipeCarousel*/

                // Comment modal
                const modalComment = document.getElementById("commentModal");
                const imgShow = document.getElementById('imgShow');

                $('.commentImg').on('click', function () {
                    modalComment.style.display = "block";
                    imgShow.src = this.src;
                })

                $('.closeImg').on('click', function () {
                    modalComment.style.display = "none";
                })
        });

        $.ajax({
            'url': '@Url.Action("getProductsOnSale","Api")',
            'type': 'get',
            'dataType': 'json'
        })
            .done(function (datas) {
                $.each(datas, function (i, prod) {
                    const heart = prod.isPocketed ? "fa-solid" : "fa-regular";
                    const intro = prod.features.substr(0, 40) + '...';
                    const item = `<div class="col-lg-4 col-md-6">
                                                                  <div class="card">
                                                                           <div class="position-relative overflow-hidden">
                                                                                <div class="bg-image hover-zoom">
                                                                                                 <a href="@Url.Action("List","Product")/${prod.productId}">
                                                                                                     <img class="card-img-top" src="@Url.Content("~/img/product/")${prod.imagePath}"/>
                                                                                         </a>
                                                                                </div>
                                                                    <div class="position-absolute top-0 end-0 mt-1 me-1">
                                                                                             <button type="button" class="btn btn-white btn-floating shadow-0" data-id="${prod.productId}">
                                                                                <i class="${heart} fa-heart fa-xl pe-none" ></i>
                                                                                    </button>
                                                                    </div>
                                                             <div class="bg-white rounded-top text-primary position-absolute start-0 bottom-0 mx-4 pt-1 px-3">
                                                                ${prod.subCategoryName}
                                                             </div>
                                                             </div>
                                                            <div class="p-4 pb-0" >
                                                                   <a class="d-block h5 mb-2" href = "@Url.Action("List","Product")/${prod.productId}">
                                                                        ${prod.productName}
                                                                        </a>
                                                                                <p>${intro}</p>
                                                                        <h5 class="text-end mb-3"> ${prod.unitPrice} <small>起</small> </h5>
                                                            </div>
                                                             <div class="d-flex border-top">
                                                                      <small class="flex-fill text-center border-end py-2">
                                                                       <i class="fa fa-map-marker-alt text-primary me-2"></i>${prod.cityName}
                                                                        </small>
                                                                         <small class="flex-fill text-center border-end py-2">
                                                                                          <i class="fa fa-star text-primary me-2"> </i>${prod.rank}
                                                                         </small>
                                                                        <small class="flex-fill text-center py-2">
                                                                          <i class="fa-solid fa-calendar-days text-primary me-2"></i>${prod.isClass}
                                                                           </small>
                                                                    </div>
                                                          </div>
                                                 </div>
                                                `;

                    if (prod.categoryId == 1 && indexTab1 < 6) {
                        tab1.innerHTML += item;
                        indexTab1++;
                    }
                    if (prod.categoryId == 2 && indexTab2 < 6) {
                        tab2.innerHTML += item;
                        indexTab2++;
                    }
                    if (prod.categoryId == 3 && indexTab3 < 6) {
                        tab3.innerHTML += item;
                        indexTab3++;
                    }
                    if (prod.categoryId == 4 && indexTab4 < 6) {
                        tab4.innerHTML += item;
                        indexTab4++;
                    }
                });

                $('.spinner-border').hide();

                let tops= sortBySales(datas);
                $.each(tops, function (i, prod) {
                    if(i<6){
                    const heart = prod.isPocketed ? "fa-solid" : "fa-regular";
                    const intro = prod.features.substr(0, 40) + '...';
                    const item = `<div class="col-lg-4 col-md-6">
                                                                          <div class="card">
                                                                                   <div class="position-relative overflow-hidden">
                                                                                        <div class="bg-image hover-zoom">
                                                                                                         <a href="@Url.Action("List","Product")/${prod.productId}">
                                                                                                             <img class="card-img-top" src="@Url.Content("~/img/product/")${prod.imagePath}"/>
                                                                                                 </a>
                                                                                        </div>
                                                                            <div class="position-absolute top-0 end-0 mt-1 me-1">
                                                                                                     <button type="button" class="btn btn-white btn-floating shadow-0" data-id="${prod.productId}">
                                                                                        <i class="${heart} fa-heart fa-xl pe-none" ></i>
                                                                                            </button>
                                                                            </div>
                                                                     <div class="bg-white rounded-top text-primary position-absolute start-0 bottom-0 mx-4 pt-1 px-3">
                                                                        ${prod.subCategoryName}
                                                                     </div>
                                                                     </div>
                                                                    <div class="p-4 pb-0" >
                                                                           <a class="d-block h5 mb-2" href = "@Url.Action("List","Product")/${prod.productId}">
                                                                                ${prod.productName}
                                                                                </a>
                                                                                        <p>${intro}</p>
                                                                                <h5 class="text-end mb-3"> ${prod.unitPrice} <small>起</small> </h5>
                                                                    </div>
                                                                     <div class="d-flex border-top">
                                                                              <small class="flex-fill text-center border-end py-2">
                                                                               <i class="fa fa-map-marker-alt text-primary me-2"></i>${prod.cityName}
                                                                                </small>
                                                                                 <small class="flex-fill text-center border-end py-2">
                                                                                                  <i class="fa fa-star text-primary me-2"> </i>${prod.rank}
                                                                                 </small>
                                                                                <small class="flex-fill text-center py-2">
                                                                                  <i class="fa-solid fa-calendar-days text-primary me-2"></i>${prod.isClass}
                                                                                   </small>
                                                                            </div>
                                                                  </div>
                                                         </div>
                                                        `;

                        top6.innerHTML += item;
                    }
                });

                btnPocket = $('.btn.btn-white.btn-floating.shadow-0');

                btnPocket.on({
                    mouseenter: function () {
                        $(this).children('i').addClass("fa-beat");
                        $(this).children('i').addClass("text-danger")
                    },
                    mouseleave: function () {
                        $(this).children('i').removeClass("fa-beat");
                        $(this).children('i').removeClass("text-danger");
                    }
                })

                btnPocket.on('click', function () {
                    const selectedProductId = $(this).data('id');
                    const btn = $(this);

                    $.ajax({
                        'url': `@Url.Action("addToPocket","Api")?id=${selectedProductId}`,
                        'type': 'get',
                        'dataType': 'json'
                    })
                        .done(function (data) {
                            if (data == '0') {
                                Swal.fire({
                                    icon: 'warning',
                                    title: '請登入會員',
                                }).then(function () {
                                    var modal = document.getElementById("myModal");
                                    modal.style.display = "block";
                                    LoginBtn();
                                })
                            }
                            if (data == '1') {
                                Swal.fire({
                                    icon: 'error',
                                    title: '已移除收藏',
                                });
                                btn.children('i').toggleClass("fa-regular");
                                btn.children('i').toggleClass("fa-solid");
                            }
                            if (data == '2') {
                                Swal.fire({
                                    icon: 'success',
                                    title: '已加入收藏',
                                });
                                btn.children('i').toggleClass("fa-regular");
                                btn.children('i').toggleClass("fa-solid");
                            }
                        });
                })
            });

        $('#ex-with-icons a').on({
            mouseenter: function () {
                $(this).children('i').addClass("fa-bounce");
            },
            mouseleave: function () {
                $(this).children('i').removeClass("fa-bounce");
            }
        })

        //比較銷量
        function compareByOrderCount(a, b) {
            let aCount = Number(a.orderCount);
            let bCount = Number(b.orderCount);
            if (aCount > bCount) {
                return -1;
            }
            if (aCount < bCount) {
                return 1;
            }
            return 0;
        }
        //依銷量排序
        function sortBySales(array) {
            return [...array].sort(compareByOrderCount);
        }

        /*---------------------------------------------------------------------------*/
        // Sticky button
        $('.sticky-bottom').hide();
        $(window).scroll(function () {
            if ($(this).scrollTop() > 300) {
                $('.sticky-bottom').fadeIn('slow');
            } else {
                $('.sticky-bottom').fadeOut('slow');
            }
        });

    </script>
    }